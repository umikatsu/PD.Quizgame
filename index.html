<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>にげまくりまっし！！！ - 防災クイズ＆ゲーム</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js" defer></script>
    <script src="https://unpkg.com/@turf/turf/turf.min.js" defer></script>
    <script src="script.js" defer></script>
</head>
<body>

    <div class="lightning"></div>
    <div class="city"></div>
    <div class="ocean"></div>

    <div id="top-screen" class="full-screen-ui">
        <h1>にげまくりまっし！！！</h1>
        <p>あなたの防災知識はどのくらい？</p>
        <button id="start-button" class="action-button primary-button">スタート</button>
    </div>

    <div id="selection-screen" class="full-screen-ui hidden">
        <h2>２つのモードがあるよ</h2>
        <p>どっちで遊ぶ？</p>
        <div class="selection-buttons-group">
            <button id="mode-quiz-button" class="action-button mode-button">クイズ/診断モード</button>
            <button id="mode-game-button" class="action-button mode-button">ゲームモード</button>
        </div>
        <button id="back-to-selection-top-button" class="navigation-button back-to-home-style">ホームに戻る</button>
    </div>

    <div id="quiz-mode-selection-screen" class="full-screen-ui hidden">
        <button id="back-from-quiz-selection-button" class="navigation-button back-button game-back-button">前の選択画面に戻る</button>
        <h2>クイズと診断、どっちにする？</h2>
        <div class="selection-buttons-group">
            <button id="select-knowledge-quiz" class="action-button mode-button">防災知識クイズ</button>
            <button id="select-personality-quiz" class="action-button mode-button">行動傾向 予測診断</button>
        </div>
    </div>

    <div id="quiz-mode-container" class="full-screen-ui hidden">
        <button id="back-from-quiz-mode-button" class="navigation-button back-button game-back-button">選択画面に戻る</button>

        <div id="quiz-start-screen" class="quiz-screen">
            <h1>防災 4択クイズへようこそ！</h1>
            <p>全<span id="total-questions-start">10</span>問のクイズにチャレンジしよう！</p>
            <button id="start-quiz-button" class="action-button primary-button">クイズ スタート</button>
        </div>

        <div id="quiz-container" class="quiz-screen hidden">

            <div id="quiz-image-group" class="hidden">
                <img id="quiz-image-1" src="" alt="クイズに関連する画像1" class="quiz-visual">
                <img id="quiz-image-2" src="" alt="クイズに関連する画像2" class="quiz-visual">
            </div>

            <h2 id="question"></h2>
            <div id="choices-container" class="button-group"></div>
            <p id="result-message" class="feedback-box"></p>
            <div class="score-area">
                <p>スコア: <span id="score-display">0</span> / <span id="total-questions">10</span></p>
            </div>
            <div id="next-button-container"></div>
        </div>

        <div id="quiz-result-screen" class="quiz-screen hidden">
            <h2>結果発表！</h2>
            <p>あなたのスコアは <span id="final-score">X</span> / <span id="final-total">Y</span> 点でした！</p>
            <p id="rank-message">評価に応じてメッセージが変わります。</p>
            <button id="back-to-mode-selection-button" class="navigation-button back-to-home-style">モード選択に戻る</button>
            <button id="retry-quiz-button" class="action-button primary-button">もう一度チャレンジ</button>
            <button id="quit-game-button" class="action-button">ゲームをやめる (防災情報へ)</button>
        </div>
    </div>

    <div id="personality-container" class="full-screen-ui hidden">
        <button id="back-from-personality-button" class="navigation-button back-button game-back-button">選択画面に戻る</button>

        <div id="personality-home-screen" class="quiz-screen active">
            <h1>災害時行動傾向 予測診断</h1>
            <p>全10問の質問に答えて、災害時におけるあなたの行動傾向を高い精度で予測しましょう。</p>
            <button id="start-personality-button" class="action-button primary-button">診断スタート</button>
        </div>

        <div id="personality-question-screen" class="quiz-screen hidden">
            <h2 id="p-question-text"></h2>
            <div id="p-options-container" class="options-container"></div>
            <p class="p-question-number"></p>
        </div>

        <div id="personality-result-screen" class="quiz-screen hidden">
            <h2>あなたの診断結果</h2>
            <div id="p-result-text" class="result-box"></div>
            <button id="p-restart-button" class="action-button primary-button">もう一度診断</button>
            <button id="p-quit-button" class="action-button">ゲームをやめる (防災情報へ)</button>
        </div>
    </div>

    <div id="game-container" class="hidden">
        <button id="back-from-game-button" class="navigation-button back-button game-back-button">選択画面に戻る</button>
        
        <div id="ui-panel">
            <div id="timer-box">03:00</div>
            <h2>紫色のエリアを避けろ！</h2>
            <div id="status-text" class="status-msg">
                地図をクリックしてルートを作成。<br>ゴールにつなげてください。
            </div>
            <button id="btn-finish" class="action-button primary-button" style="width:100%; font-size:1rem; padding:10px;">ここに避難する！</button>
            <button id="btn-retry" class="action-button" style="width:100%; font-size:1rem; padding:10px; background-color: #7f8c8d;">リセット</button>
        </div>

        <div id="result-overlay">
            <div class="result-box">
                <div id="res-title" class="result-title"></div>
                <p id="res-desc"></p>
                <button id="overlay-retry-button" class="action-button primary-button">もう一度遊ぶ</button>
                <button id="overlay-quit-button" class="action-button">やめる(防災情報へ）</button>
            </div>
        </div>

        <div id="map"></div>
    </div>

    <button id="back-to-top-button" class="navigation-button back-button hidden">タイトルに戻る</button>

</body>

</html>





